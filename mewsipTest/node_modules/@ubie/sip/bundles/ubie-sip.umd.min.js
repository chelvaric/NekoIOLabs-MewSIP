!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("sip.js/lib/UA")):"function"==typeof define&&define.amd?define("@ubie/sip",["exports","@angular/core","sip.js/lib/UA"],t):t(((e=e||self).ubie=e.ubie||{},e.ubie.sip={}),e.ng.core,e.UA)}(this,(function(e,t,n){"use strict";var i=function(){function e(){}return e.prototype.acceptCall=function(){null!=this.IncommingCallSession&&this.IncommingCallSession.accept()},e.prototype.refuseCall=function(){null!=this.IncommingCallSession&&this.IncommingCallSession.close()},e.prototype.setConfig=function(e){var t={uri:e.Uri,authorizationUser:e.UserName,displayName:e.DisplayName,transportOptions:{wsServers:[e.WebsocketUrl]},password:e.Password};this.UserAgent=new n.UA(t)},e.prototype.registerAgentEvents=function(){var e=this;this.UserAgent.on("invite",(function(t){return e.inviteCallBack(t)})),this.UserAgent.on("registrationFailed",(function(t,n){return e.registerFailedCallBack(t,n)})),this.UserAgent.on("registered",(function(t){return e.registeredCallBack(t)}))},e.prototype.registeredCallBack=function(e){null!=this.OnRegistered&&this.OnRegistered.emit(!0)},e.prototype.registerFailedCallBack=function(e,t){null!=this.OnRegistered&&this.OnRegistered.emit(!1)},e.prototype.inviteCallBack=function(e){null!=e&&(this.registerInviteEvents(e),this.IncommingCallSession=e,this.OnIncommingCall.next(e.contact))},e.prototype.registerInviteEvents=function(e){var t=this;e.on("trackAdded",(function(){return t.trackAddedCallback()}))},e.prototype.trackAddedCallback=function(){if(null!=this.IncommingCallSession){var e=this.IncommingCallSession.sessionDescriptionHandler.peerConnection,t=new MediaStream;return e.getReceivers().forEach((function(e){t.addTrack(e.track)})),this.OnMediaRecieved.emit(t),this.IncommingCallSession}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();e.SipService=i,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ubie-sip.umd.min.js.map